<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title></title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="apple-touch-icon" href="icon.png">
<link rel="favicon.ico" rel="icon" type="image/ico">
<link rel="canonical" href="https://blog.koehntopp.info">


<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/feed.xml' title="Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/mysql/feed.xml' title="Feed: mysql Articles for Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/review/feed.xml' title="Feed: review Articles for Die wunderbare Welt von Isotopp">




<meta name="generator" content="Hugo 0.92.0" />
<meta property="og:title" content='' />
<meta property="og:site_name" content='Die wunderbare Welt von Isotopp' />


<meta property="og:locale" content="en_US" />


<meta name="description" content='' />
<meta property="og:description" content='' />

<link rel="canonical" href="https://blog.koehntopp.info" />
<meta property="og:url" content="https://blog.koehntopp.info" />


<meta property="og:type" content="article" />
<meta name="article:published_time" content='0001-01-01T00:00:00Z' />



<meta property="og:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content='@' />
<meta name="twitter:creator" content='@' />
<meta property="twitter:title" content='' />
<meta property="twitter:description" content='' />
<meta property="twitter:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />

<script type="application/ld+json">
    {"@context":"https://schema.org","@type":"WebSite","description":null,"headline":null,"image":"/assets/img/background/rijksmuseum.jpg","name":"Die wunderbare Welt von Isotopp","url":"https://blog.koehntopp.info"}
</script>

    



<link rel="stylesheet" href="https://blog.koehntopp.info/style.min.34cf67ab5155251adc1c5fa5c2f37d5a4f8f029f51399eb2556031d6ac918d49.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light px-lg-4 pt-lg-4">
    <div class="container-fluid">
        <a class="navbar-brand justify-content-center" href="https://blog.koehntopp.info" rel="home" title="Die wunderbare Welt von Isotopp">
            <img alt="Kris" height='48' width='48' src='/assets/img/isotopp.jpg' class='p-0 me-3 d-block d-lg-inline'>
            <span class='h4 d-block d-lg-inline'>Die wunderbare Welt von Isotopp</span>
        </a>

        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">
                        <span class="">About</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/contribute/">
                        <span class="">Contribute</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/search/">
                        <span class=""><svg class='bi' height='1.5rem' width='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#search'/></svg></span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">
                        <span class=""><svg class='bi' width='1.5rem' height='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#tags-fill'/></svg></span>
                        
                    </a>
                </li>
                
            </ul>
            
        </div>

    </div>
</nav>


        <main role="main" class="container-fluid p-0">

            


<div class="page mb-4">

  <div class='row justify-content-center text-center my-4 mx-0'>
    <header>
      <div class='col'>
        <h1 class="title mb-lg-4 text-white">
          Die wunderbare Welt von Isotopp
        </h1>
      </div>
      <img src='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg'>
    </header>
  </div>

  
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/09/07/mysql-from-a-developers-perspective.html" class='text-decoration-none text-dark'>MySQL from a Developers Perspective</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          September 7, 2020
        </div>

        <div class='mt-3'>So this has turned into a small series, explaining how to work with MYSQL from a developers perspective. This post is intended as a directory for the individual articles. It will be amended and re-dated as necessary.
The code for the series is also available in isotopp/mysql-dev-examples on GitHub.
The Tag #mysqldev will reference all articles from this series.
  MySQL Transactions - the physical side . Looking at how MySQL InnoDB handles transactions on the physical media, enabling rollback and commit.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/09/07/mysql-generated-columns-and-virtual-indexes.html" class='text-decoration-none text-dark'>MySQL: Generated Columns and virtual indexes</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          September 7, 2020
        </div>

        <div class='mt-3'>We have had a look at how MySQL 8 handles JSON recently, but with all those JSON functions and expressions it is clear that many JSON accesses cannot be fast. To grab data from a JSON column, you will use a lot of $-&gt;&gt;field expressions and similar, and without indexes nothing of this will be fast.
JSON cannot be indexed.
But MySQL 8 offers another feature that comes in handy: Generated columns and indexes on those.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/09/04/mysql-json-data-type.html" class='text-decoration-none text-dark'>MySQL: Basic usage of the JSON data type</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          September 4, 2020
        </div>

        <div class='mt-3'>MySQL 8 provides solid support for the JSON data type. The manual has an overview of the data type , a JSON function reference , an an overview on generated column indexes , and explains multi-values indexes .
Creating JSON columns   Creating JSON columns is easy: Make the column of the JSON data type, fill in valid JSON data.
mysql&gt;createtablet(idintegernotnullprimarykeyauto_increment,jjson);QueryOK,0rowsaffected(0.11sec)mysql&gt;insertintot(j)values-&gt;(&#39;null&#39;),-&gt;(&#39;true&#39;),-&gt;(&#39;false&#39;),-&gt;(&#39;1&#39;),-&gt;(&#39;&#34;keks&#34;&#39;),-&gt;(&#39;[&#34;eins&#34;, &#34;zwei&#34;]&#39;),-&gt;(&#39;{&#34;eins&#34;: &#34;one&#34;, &#34;zwei&#34;: &#34;two&#34;}&#39;);QueryOK,5rowsaffected(0.02sec)mysql&gt;selectjson_type(j)astype,json_valid(j)asvalid,isnull(j)assqlnull,j,idfromt;+---------+-------+---------+--------------------------------+----+ |type|valid|sqlnull|j|id|+---------+-------+---------+--------------------------------+----+ |NULL|NULL|1|NULL|1||NULL|1|0|null|2||BOOLEAN|1|0|true|3||BOOLEAN|1|0|false|4||INTEGER|1|0|1|5||STRING|1|0|&#34;keks&#34;|6||ARRAY|1|0|[&#34;eins&#34;,&#34;zwei&#34;]|7||OBJECT|1|0|{&#34;eins&#34;:&#34;one&#34;,&#34;zwei&#34;:&#34;two&#34;}|8|+---------+-------+---------+--------------------------------+----+ 8rowsinset(0.00sec)mysql&gt;insertintot(j)values(&#39;[&#34;incomplete&#34;, &#34;array&#34;, &#34;closing bracket&#34;&#39;);ERROR3140(22032):InvalidJSONtext:&#34;Missing a comma or &#39;]&#39; after an array element.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/09/02/macos-relocated-items.html" class='text-decoration-none text-dark'>MacOS: Deleting Relocated Items</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          September 2, 2020
        </div>

        <div class='mt-3'>I had to upgrade my company issued MacBook pro to Catalina for fleet unity reasons. The upgrade left me with a folder Relocated Items in /Users/Shared/Desktop and a link to that prominently on my Desktop.
Deleting that folder moved it to trash. Trying to empty trash then failed. That is because in that folder was several levels deep a folder or link to X11R6.
Apple considers that file outdated, which is why it ended up in Relocated Items.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/08/31/on-touching-candles.html" class='text-decoration-none text-dark'>On Touching Candles, And Error Budgets</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          August 31, 2020
        </div>

        <div class='mt-3'>Ok, it&rsquo;s &ldquo;Dad Stories&rdquo; Time (from Twitter ). When my son was somewhat older than a year, he was learning to speak. He could already say &ldquo;Mama&rdquo; and &ldquo;Papa&rdquo;.
It was around Christmas, and there was a candle on the table, glowing interestingly, so he wanted to touch it. &ldquo;Nein, heiß&rdquo; is what you would say in German.
Of course, a toddler does not understand the meaning of &ldquo;heiß&rdquo;. I mean, he&rsquo;s trying to imitate the sound of it, but the meaning of &ldquo;heiß&rdquo; is something specific.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/08/25/null-is-null.html" class='text-decoration-none text-dark'>MySQL: NULL is NULL</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          August 25, 2020
        </div>

        <div class='mt-3'>Question: Hey, I got a UNIQUE INDEX, but I can store multiple rows with the same value, NULL. That is surprising. Is that a bug?
 This is a rewrite of the same in German from 9 years ago .
 root@localhost[kris]&gt;createtablet(ainteger,binteger,unique(a,b));QueryOK,0rowsaffected(0.09sec)root@localhost[kris]&gt;insertintotvalues(1,2);QueryOK,1rowaffected(0.01sec)root@localhost[kris]&gt;insertintotvalues(1,2);ERROR1062(23000):Duplicateentry&#39;1-2&#39;forkey&#39;t.a&#39;This does not work, as expected. But this does:
root@localhost[kris]&gt;truncatetablet;QueryOK,0rowsaffected(0.16sec)root@localhost[kris]&gt;insertintotvalues(1,NULL);QueryOK,1rowaffected(0.02sec)root@localhost[kris]&gt;insertintotvalues(1,NULL);QueryOK,1rowaffected(0.03sec)root@localhost[kris]&gt;select*fromt;+------+------+ |a|b|+------+------+ |1|NULL||1|NULL|+------+------+ 2rowsinset(0.00sec)Why is that?
This is usually where I point people at SQL for Smarties: Advanced SQL Programming .</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/08/19/why-do-ops-and-sec-people-wear-black.html" class='text-decoration-none text-dark'>Why do Ops and Sec people wear black</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          August 19, 2020
        </div>

        <div class='mt-3'>For reasons that don&rsquo;t need exploring at this juncture I tweeted  Once upon a time there were shared boxes, on which the local Unix easily had 200-300 users, Junior Developers at a University.
A /tmp/ls found easily 3-4 people per day that had . (dot) in their path.
No particular reason. Why?
 and followed up with
 Hope is not a strategy.
Neither is curl stackoverflow | sudo bash.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/08/18/mysql-character-sets.html" class='text-decoration-none text-dark'>MySQL: Some Character Set Basics</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          August 18, 2020
        </div>

        <div class='mt-3'>This is the updated and english version of some older posts of mine in German. It is likely still incomplete, and will need information added to match current MySQL, but hopefully it is already useful.
Old source articles in German: 1 , 2 and 3 .
Some vocabulary   Symbol, Font, Encoding and Collation - what do they even mean?
A character set is a collection of symbols that belong together.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/08/17/building-the-cycling-city.html" class='text-decoration-none text-dark'>Fertig gelesen: Building the Cycling City</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          August 17, 2020
        </div>

        <div class='mt-3'>Melissa and Chris Bruntlett have been living in Vancouver close to the station, and decided to do as many daily runs as possible without a car, using public transport or bikes. In late 2015, early 2016 they did an extended visit to the Netherlands which resulted in a changed world view about what proper Urban Infrastructure can look like. Meanwhile they are living with two kids near Delft, in the Netherlands.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/08/16/fertig-gelesen-defensive-baking.html" class='text-decoration-none text-dark'>Fertig gelesen: A Wizard&#39;s Guide To Defensive Baking</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          August 16, 2020
        </div>

        <div class='mt-3'>A Wizard&rsquo;s Guide To Defensive Baking is a Yound Adult Coming-of-Age story about Mona. Mona works in her aunt&rsquo;s bakery, and also is a hedge wizard. Her talent is mostly limited to influencing dough and baked goods, her familiar is a sourdough starter named Bob.
 A Wizards Guide To Defensive Baking, T. Kingfisher, Amazon Mona is a 14-year-old girl living in Riverbraid, a random city-state near a river in the floodplain of an otherwise unnamed country that vaguely feels like northern Italy during renaissance times.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/08/14/eli5-epic-vs-apple-and-google.html" class='text-decoration-none text-dark'>ELI5: Epic vs Apple and Google</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          August 14, 2020
        </div>

        <div class='mt-3'>@jpmens asked on Twitter:
 What is Fortnite? #outingmyself
Assuming XKCD 1053 .
Fortnite   Fortnite is a game made by Epic Games. They also make the Unreal Engine, which powers many modern computer games. Fortnite together with Roblox and Minecraft it is the set of games played most by people under 20.
You want to follow Matthew Ball .
Fortnite is a Battle Royal game, a 1st person shooter, in which a matchmaker puts you together with a set of other people of similar skill, drops you into an arena of ever shrinking size.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/08/04/mysql-foreign-key-constraints-and-locking.html" class='text-decoration-none text-dark'>MySQL Foreign Key Constraints and Locking</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          August 4, 2020
        </div>

        <div class='mt-3'>Since we now know how to look at the state of locking in a live database, let&rsquo;s look at what happens when we run a normal insert or update and an insert or update with foreign key relationships defined, and compare.
We will be using the tables and structures from our previous examples, a simple 1:n relationship between a and b:
CREATETABLEa(a_idintNOTNULLAUTO_INCREMENT,PRIMARYKEY(a_id));INSERTINTOaVALUES(10),(20),(30),(40);CREATETABLEb(b_idintNOTNULLAUTO_INCREMENT,a_idintNOTNULL,PRIMARYKEY(b_id),KEY`a_id`(a_id),CONSTRAINTa_id_existsFOREIGNKEY(a_id)REFERENCESa(a_id)ONDELETERESTRICTONUPDATERESTRICT);INSERTINTObVALUES(10,10),(40,40);or the same definition for b without the constraint.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/08/03/mysql-foreign-keys-and-foreign-key-constraints.html" class='text-decoration-none text-dark'>MySQL Foreign Keys and Foreign Key Constraints</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          August 3, 2020
        </div>

        <div class='mt-3'>Foreign Keys are what links tables together and turns a set of tables into a model. Foreign Key Constraints are conditions that must be true for the content of the tables to be an internally consistent model. Foreign Key Constraints can be defined and enforced in InnoDB, but this comes at a considerable price, and for some it may hurt more than it is worth.
A very simple shop as an ER-model.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/08/02/mysql-deadlocks-with-insert.html" class='text-decoration-none text-dark'>MySQL Deadlocks with INSERT</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          August 2, 2020
        </div>

        <div class='mt-3'>Support Channel. &ldquo;Hi, I am getting deadlocks in the database, and they occur when I have to roll back the transactions but if we don&rsquo;t have to roll back all transactions get executed.&rdquo; Wait, what? After some back and forth it becomes clear that the Dev experiences deadlocks and has data:
mysql&gt;pagerlessmysql&gt;showengineinnodbstatus\G...MySQLthreadid142531,OSthreadhandle139990258222848,queryid4799571somehost.somedomainsomeuserupdateINSERTintosometable(identifier_id,currency,balance)VALUES(&#39;d4e84cb1-4d56-4d67-9d16-1d548fd26b55&#39;,&#39;EUR&#39;,&#39;0&#39;)***(2)HOLDSTHELOCK(S):RECORDLOCKSspaceid3523pageno1106463nbits224indexPRIMARYoftable`somedb`.`sometable`trxid9843342279lockmodeSlocksgapbeforerecand that is weird because of the lock mode S locks gap in the last line. We get the exact same statement with the exact same value on the second thread, but with lock mode X locks gap.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/08/01/mysql-locks-and-deadlocks.html" class='text-decoration-none text-dark'>MySQL: Locks and Deadlocks</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          August 1, 2020
        </div>

        <div class='mt-3'>In a previous article we wrote data to the database using atomic update statements, and then using transactions with SELECT ... FOR UPDATE. In this article we will look at what happens when we continue doing this, in a more complicated way. Source code for this article is also available on GitHub.com .
A simple row lock   But first let&rsquo;s do things manually: We create a table kris with an integer primary key column and a secondary unindexed data column.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/07/30/mysql-transactions-writing-data.html" class='text-decoration-none text-dark'>MySQL Transactions - writing data</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          July 30, 2020
        </div>

        <div class='mt-3'>Using the framework for testing we created in earlier articles, let&rsquo;s try to modify some data. We are writing a small program that increments a counter. Our table looks like this, and contains 10 counters:
CREATETABLE`demo`(`id`bigintunsignedNOTNULLAUTO_INCREMENT,`counter`intNOTNULLDEFAULT&#39;0&#39;,UNIQUEKEY`id`(`id`))INSERTINTO`demo`VALUES(1,0);INSERTINTO`demo`VALUES(2,0);...INSERTINTO`demo`VALUES(10,0);We are using some very simple programming to increment a counter:
@sql.command() @click.option(&#34;--name&#34;, default=&#34;demo&#34;, help=&#34;Table name to count in&#34;) @click.option(&#34;--id&#34;, default=0, help=&#34;Counter to use&#34;) @click.option(&#34;--count&#34;, default=1000, help=&#34;Number of increments&#34;) def count(name, id, count): &#34;&#34;&#34; Increment counter --id by --count many steps in table --name &#34;&#34;&#34; for i in range(0, count): cmd = f&#34;update {name}set counter=counter+1 where id = {id}&#34; c = db.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/07/29/mysql-transactions-the-logical-view.html" class='text-decoration-none text-dark'>MySQL Transactions - the logical side</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          July 29, 2020
        </div>

        <div class='mt-3'>After having a look how MySQL handles transactions physically , let&rsquo;s have a look at what is going on from a logical point of view.
We are using a test table called demo with an id and a counter field, both integer. In it, we have 10 counters, all set to 0.
CREATETABLE`demo`(`id`bigintunsignedNOTNULLAUTO_INCREMENT,`counter`intNOTNULLDEFAULT&#39;0&#39;,UNIQUEKEY`id`(`id`))INSERTINTO`demo`VALUES(1,0);INSERTINTO`demo`VALUES(2,0);...INSERTINTO`demo`VALUES(10,0);In one session, we start a transaction and modify a counter value. We do not commit anything.
Session1&gt;starttransactionreadwrite;Session1&gt;updatedemosetcounter=10whereid=3;Isolation   In a second session, we check the data and notice a few things:</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/07/28/mysql-connection-scoped-state.html" class='text-decoration-none text-dark'>MySQL Connection Scoped State</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          July 28, 2020
        </div>

        <div class='mt-3'>MySQL speaks its own proprietary protocol. It cannot be routed by an HTTP proxy, and a MySQL connection is entire unlike an HTTP connection. Specifically, a lot of state and configuration is tied to a MySQL connection, and it cannot be recovered on disconnect.
What state is tied to a connection?   Transactions   A disconnect implies a ROLLBACK. So if you are in a transaction, all changes to the database that you attempted are lost, rolled back, as if they never happened.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/07/27/mysql-commit-size-and-speed.html" class='text-decoration-none text-dark'>MySQL Commit Size and Speed</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          July 27, 2020
        </div>

        <div class='mt-3'>When writing data to disk, for small transactions the cost of writing the commit out do disk dominates the execution time of the script. In order to show that, I wrote a little Python script.
The script creates a test table in a database and writes 10.000 rows of test data into it, in commit sizes of 1, 2, 4, &hellip;, 1024 rows.
$ ./mysql.py --help Usage: mysql.py [OPTIONS] COMMAND [ARGS].</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2020/07/27/mysql-transactions.html" class='text-decoration-none text-dark'>MySQL Transactions - the physical side</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://twitter.com/isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          July 27, 2020
        </div>

        <div class='mt-3'>So you talk to a database, doing transactions. What happens actually, behind the scenes? Let’s have a look.
There is a test table, and we write data into it inside a transaction:
CREATETABLEt(idserial,datavarbinary(255))STARTTRANSACTIONREADWRITEINSERTINTOt(id,data)VALUES(NULL,RANDOM_BYTES(255))COMMITThe MySQL test instance we are talking to is running on a Linux machine, and otherwise idle to make observation easier. Also, we configured it with innodb_use_native_aio = false because observing actual physical asynchronous I/O and attributing it to the statement that caused it is really hard.</div>

    </div>
  </div>

  <div class='row mb-4 py-4 mx-0 justify-content-center'>
    <div class='col-lg-8 fs-5'>
    
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/blog/5.html" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/blog/4.html" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/blog/5.html" aria-label="Page 5" class="page-link" role="button">5</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 6" class="page-link" role="button">6</a>
      </li>
      <li class="page-item">
        <a href="/blog/7.html" aria-label="Page 7" class="page-link" role="button">7</a>
      </li>
      <li class="page-item">
        <a href="/blog/8.html" aria-label="Page 8" class="page-link" role="button">8</a>
      </li>
      <li class="page-item">
        <a href="/blog/7.html" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/blog/46.html" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>
    </div>
  </div>


    
</div>



            <footer class='row justify-content-center mb-4 pb-4 mx-0'>
  <div class='col-8 text-center'>
    <div>
      A collection of old stuff, new stuff and random stuff. 
    </div>
    <div class='row text-primary mt-4'>
      <div class='col'>

        <a href='/feed.xml' title='Follow RSS feed' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#rss-fill'/></svg>
        </a>

        <a href='mailto:kristian.koehntopp@gmail.com' title='Email' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#envelope'/></svg>
        </a>

        <a href='https://github.com/isotopp' title='Follow on GitHub' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#github'/></svg>
        </a>

        <a href='https://www.reddit.com/user/isotopp' title='Follow on Reddit' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#reddit'/></svg>
        </a>

        <a href='http://steamcommunity.com/id/ixotopp' title='Follow on Steam' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#steam'/></svg>
        </a>

        <a href='https://twitter.com/isotopp' title='Follow on Twitter' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#twitter'/></svg>
        </a>

        <a href='https://www.youtube.com/user/isotopp' title='Follow on YouTube' class=''>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#youtube'/></svg>
        </a>

      </div>
    </div>
  </div>
</footer>


        </main>

	





<script src="https://blog.koehntopp.info/js/bootstrap.js"></script>




<script src="https://blog.koehntopp.info/js/lunr.js"></script>





<script src="https://blog.koehntopp.info/js/app.js"></script>


    </body>
</html>
