<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Die wunderbare Welt von Isotopp | Die wunderbare Welt von Isotopp</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="apple-touch-icon" href="icon.png">
<link rel="favicon.ico" rel="icon" type="image/ico">
<link rel="canonical" href="https://blog.koehntopp.info/">


<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/feed.xml' title="Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/mysql/feed.xml' title="Feed: mysql Articles for Die wunderbare Welt von Isotopp">
<link rel="alternate" type="application/rss+xml" href='https://blog.koehntopp.info/tags/review/feed.xml' title="Feed: review Articles for Die wunderbare Welt von Isotopp">




<meta name="generator" content="Hugo 0.111.3">
<meta property="og:title" content='' />
<meta property="og:site_name" content='Die wunderbare Welt von Isotopp' />


<meta property="og:locale" content="en_US" />


<meta name="description" content='' />
<meta property="og:description" content='' />

<meta property="og:url" content="https://blog.koehntopp.info" />


<meta property="og:type" content="article" />
<meta name="article:published_time" content='0001-01-01T00:00:00Z' />



<meta property="og:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content='@' />
<meta name="twitter:creator" content='@' />
<meta property="twitter:title" content='' />
<meta property="twitter:description" content='' />
<meta property="twitter:image" content='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg' />

<script type="application/ld+json">
    {"@context":"https://schema.org","@type":"WebSite","description":null,"headline":null,"image":"/assets/img/background/rijksmuseum.jpg","name":"Die wunderbare Welt von Isotopp","url":"https://blog.koehntopp.info"}
</script>

    



<link rel="stylesheet" href="https://blog.koehntopp.info/style.min.6b600fb66ca1591ba6dcc9b3bdfc59ebd5c0fdc49622889f839fc36f71dde892.css">


    </head>
    <body>
        

        <nav class="navbar navbar-expand-lg navbar-light px-lg-4 pt-lg-4">
    <div class="container-fluid">
        <a class="navbar-brand justify-content-center" href="https://blog.koehntopp.info" rel="home" title="Die wunderbare Welt von Isotopp">
            <img alt="Kris" height='48' width='48' src='/assets/img/avatars/isotopp.jpg' class='p-0 me-3 d-block d-lg-inline'>
            <span class='h4 d-block d-lg-inline'>Die wunderbare Welt von Isotopp</span>
        </a>

        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">
                        <span class="">About</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/contribute/">
                        <span class="">Contribute</span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/search/">
                        <span class=""><svg class='bi' height='1.5rem' width='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#search'/></svg></span>
                        
                    </a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/tags/">
                        <span class=""><svg class='bi' width='1.5rem' height='1.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#tags-fill'/></svg></span>
                        
                    </a>
                </li>
                
            </ul>
            
        </div>

    </div>
</nav>


        <main role="main" class="container-fluid p-0">

            


<div class="page mb-4">

  <div class='row justify-content-center text-center my-4 mx-0'>
    <header>
      <div class='col'>
        <h1 class="title mb-lg-4 text-white">
          Die wunderbare Welt von Isotopp
        </h1>
      </div>
      <img src='https://blog.koehntopp.info/assets/img/background/rijksmuseum.jpg'>
    </header>
  </div>

  
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/12/10/2fa-fuer-mastodon.html" class='text-decoration-none text-dark'>2FA für Mastodon</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          December 10, 2022
        </div>

        <div class='mt-3'>Multi-Factor Authentication (Identifikation mit mehreren Faktoren) oder 2FA (Two-Factor-Authentication) sind ein Weg, einen Account vor der Übernahme durch Dritte zu schützen.
Statt sich mit Usernamen und Passwort anzumelden ist zusätzlich noch eine wechselnde Pseudozufallszahl notwendig. Diese wird von einem Seed-Wert generiert, der durch eine Buchstabenfolge oder einen QR-Code repräsentiert wird.
Authenticator Anwendung installieren Das Verfahren ist standardisiert und wird von vielen Tools unterstützt. Dazu gehören Google Authenticator, Bitwarden und viele andere Passwortmanager.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/12/05/change-data-capture.html" class='text-decoration-none text-dark'>Change Data Capture</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          December 5, 2022
        </div>

        <div class='mt-3'>Change Data Capture is a way to capture, well, events from a system that describe how the data in the system changed. For a system that does business transactions that may be at the lowest level Create, Update, or Delete of entities or relationships. Systems that emit this kind of events are called Entity Services and are kind of the lowest level of events that you can have in such a system.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/12/02/usenet-und-tiernetze.html" class='text-decoration-none text-dark'>USENET und Tiernetze</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          December 2, 2022
        </div>

        <div class='mt-3'>Vor ziemlich genau 30 Jahren gab es in Deutschland die Anfangsgründe des Internet , aber es gab auch Netze, die auf anderer, viel älterer Technologie betrieben wurden &ndash; die Mailboxnetze. Das sind dezentrale Netze, bei denen denen lokale Rechner mit Modems ausgestattet wurden, bei denen man anrufen und dann Nachrichten a la Mastodon online lesen konnte. Oder man hatte Software daheim, die bei der Mailbox anrief, die Nachrichten heruntergeladen hat. Dann konnte man offline lesen, Antworten schreiben und ein zweites Mal anrufen.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/11/28/systemd-and-docker-fd.html" class='text-decoration-none text-dark'>Systemd and docker -H fd://</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          November 28, 2022
        </div>

        <div class='mt-3'>Based on what I learned in Systemd Service and Socket Activation and Systemd Service and stdio , we can now have a look at Docker.
The code for -H fd://-Handling is here . The file descriptors are coming from activation.Listeners(), and are in the listeners slice. In our case, the part after the fd:// is empty, so lines 83-85 are activated, and the incoming fd&rsquo;s are passed to the Docker proper.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/11/28/systemd-service-and-stdio.html" class='text-decoration-none text-dark'>Systemd Service and stdio</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          November 28, 2022
        </div>

        <div class='mt-3'>After yesterday&rsquo;s article, Arne Blankerts pointed me at a note showing how to install a program using stdio with systemd.
Code and Unit files The code:
#! /usr/bin/env python3 import sys if __name__ == &#34;__main__&#34;: while True: line = input().strip() print(f&#34;ECHO: {line}&#34;) if line == &#34;QUIT&#34;: sys.exit(0) The Socket Unit:
$ systemctl --user cat kris2.socket # /home/kris/.config/systemd/user/kris2.socket [Unit] Description=My second service PartOf=kris2.service [Socket] ListenStream=127.0.0.1:12346 Accept=Yes [Install] WantedBy=sockets.target And the Service Unit, which has to be a template:</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/11/27/systemd-service-and-socket-activation.html" class='text-decoration-none text-dark'>Systemd Service and Socket Activation</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          November 27, 2022
        </div>

        <div class='mt-3'>In today&rsquo;s Yak Shaving session I needed to understand how to expose the docker socket of a remote machine over the network. You should not do that, it is totally insecure, but I needed to do that to test something.
Socket Activation I discovered that dockerd is running with -H fd://.
# ps axuwww | grep docker[d] root 1616732 0.5 0.1 2930892 52168 ? Ssl 15:32 2:25 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/11/20/etl-from-a-django-model.html" class='text-decoration-none text-dark'>ETL from a Django Model</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          November 20, 2022
        </div>

        <div class='mt-3'>Continued from last weeks article on data warehouses.
At work, I was tasked with building a capacity model for data center growth. The basic assumption of these things is often that the future behaves similarly to the past, so the future predicted capacity model is somehow an extension of past growth. I needed old server usage data, and was indeed able to find that in one of our systems, called ServerDB.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/11/16/of-stars-and-snowflakes.html" class='text-decoration-none text-dark'>Of Stars and Snowflakes</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          November 16, 2022
        </div>

        <div class='mt-3'>A sample system When you have an Online Transactional Database, you have to record transactions at some point in time. That means you get a table with time dimension in your OLTP system. Consider for example a system that records Reservations. Users exist and can reserve Things to use, for a day.
You probably get a structure such as this:
In an OLTP database, a reservation is a (resid, userid, thingid, date).</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/11/09/databases-on-unraided-storage.html" class='text-decoration-none text-dark'>Databases on un-RAID-ed storage?</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          November 9, 2022
        </div>

        <div class='mt-3'>Where I work, we run bare-metal databases on non-redundant local storage. That is, a database is a very cheap frontend blade server. It has 2 CPUs, with 8 cores/16 threads each. It contains 128 GB of memory, 2 or 4 TB of local NVME and it has a 10 GBit/s network interface. It costs around 120 to 150 Euro per month to run for 5 years, including purchase price and all datacenter costs.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/11/07/bandwidth-iops-and-latency.html" class='text-decoration-none text-dark'>Bandwidth, IOPS and Latency</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          November 7, 2022
        </div>

        <div class='mt-3'>A harddisk from 1998.
The opening image for this post shows the stock photo of a hard disk platter. You can see a movable arm that can ride in and out of a stack of rotating platters coated with some kind of metal oxide. We sometimes call this kind of storage condescendingly &ldquo;rotating rust&rdquo;, when in reality it is a triumph of material science.
Moving an arm costs time, and bringing that arm into the right position and then waiting until the right segment of disk rotates underneath it so that we can write things to disk takes time.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/10/25/proper-o11y-for-mysql.html" class='text-decoration-none text-dark'>Proper O11y for MySQL</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          October 25, 2022
        </div>

        <div class='mt-3'>Three years ago, I learned that due to SREcon, Charity Majors was in Amsterdam. I set up a meeting between Benjamin Tyler, Yves Orton and a few more colleagues of mine, and her. That is, because apparently in a case of co-evolution, our company internal &ldquo;Events&rdquo; system and Honeycombs observability tooling, modelled after experiencing Fabooks &ldquo;Scuba&rdquo; seemed to be doing a lot of the same things.
These days, we are using Honeycomb a lot to record events, and debug code running in distributed systems.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/10/18/software-supply-chain-issues.html" class='text-decoration-none text-dark'>Software Supply Chain Issues</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          October 18, 2022
        </div>

        <div class='mt-3'>The GitHub Security Lab has a long hard look at &ldquo;Apache Commons Text&rdquo; in March this year. That resulted in CVE-2022-42889 . The exploit goes like this:
final StringSubstitutor interpolator = StringSubstitutor.createInterpolator(); String out = interpolator.replace(&#34;${script:javascript:java.lang.Runtime.getRuntime().exec(&#39;touch /tmp/foo&#39;)}&#34;); System.out.println(out); Next to ${script:...} there are apparently also a ${url:...} and `${dns} as other unsuitable substitutions, and they nest.
This was fixed in October 2022, after being reminded by GHSL in May and August.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/10/12/groups-and-places.html" class='text-decoration-none text-dark'>Groups and Places</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          October 12, 2022
        </div>

        <div class='mt-3'>In a distributed, asynchronous environment, there is a need for distributed, asynchronous interaction. This interaction is often written, but &ldquo;writing&rdquo; these days is actually a media-rich process that includes much more than letters. It also needs to be able to build some structure, and some gateway to level up to more synchronous and even richer communication.
Let&rsquo;s have a chat about chats, and what properties they have.
Historically, chat was lines of text, without much structure.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/10/10/pan-narrans-and-better-meetings.html" class='text-decoration-none text-dark'>Pan Narrans and Better Meetings</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          October 10, 2022
        </div>

        <div class='mt-3'>When you are looking for a better Remote First culture, you are looking for better meetings. If you go for better meetings, you will also have fewer of them.
“The anthropologists got it wrong when they named our species Homo sapiens (&lsquo;wise man&rsquo;). In any case it&rsquo;s an arrogant and bigheaded thing to say, wisdom being one of our least evident features. In reality, we are Pan narrans, the storytelling chimpanzee.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/09/27/mysql-local-and-distributed-storage.html" class='text-decoration-none text-dark'>MySQL: Local and distributed storage</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          September 27, 2022
        </div>

        <div class='mt-3'>Where I work, we are using MySQL in a scale-out configuration to handle our database needs.
That means, you write to a primary server, but reads generally go to a replica database further down in a replication tree.
A number of additional requirements that should not concern you as a developer make it a little bit more elaborate than a simple &ldquo;primary and a number of replicas&rdquo; configuration. But the gist of all that is:</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/09/26/mysql-data-for-testing.html" class='text-decoration-none text-dark'>MySQL: Data for Testing</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          September 26, 2022
        </div>

        <div class='mt-3'>Where I work, there is an ongoing discussion about test data generation. At the moment we do not replace or change any production data for use in the test environments, and we don&rsquo;t generate test data.
That is safe and legal, because production data is tokenized. That is, PII and PCI data is being replaced by placeholder tokens which can be used by applications to access the actual protected data through specially protected access services.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/09/19/sometimes-it-is-not-the-database.html" class='text-decoration-none text-dark'>MySQL: Sometimes it is not the database</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          September 19, 2022
        </div>

        <div class='mt-3'>Query latencies in one data center are larger than elsewhere for one replication hierarchy, but only in the high percentiles. This impacts production and traffic is being failed away from that data center to protect production.
When the P50 and P90 look okay, but the P99 and the P99.9 do not, the database(s) operate normally, and only some queries are running slow. The initial guess was &ldquo;for some queries the plan has flipped, but only in that data center.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/09/14/artifactory-conclusion.html" class='text-decoration-none text-dark'>MySQL: Artifactory Conclusion</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          September 14, 2022
        </div>

        <div class='mt-3'>Two weeks ago I was being drawn into the debug of artdb, the Replication hierarchy used by our Artifactory instance.
TL;DR Artifactory overloaded the database. This was incident-handled by optimizing a number of slow queries using some covering index trickery, and by upgrading the hardware substantially.
Using the runway we bought, we found and partially fixed the following problems:
Fixed: A number of very expensive reporting queries were sped up 16x to 20x using covering indexes, from 180s runtime to 8s-12s runtime.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/09/08/mysql-straight-lines.html" class='text-decoration-none text-dark'>MySQL: Straight lines</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          September 8, 2022
        </div>

        <div class='mt-3'>A database is showing replication delay, and so are all the other instances of the same replication hierarchy, all of which reside in Openstack.
Shortly before 21:30 the database begins to lag, until around 23:45, when it starts to catch up, slowly. After 00:30, we gain delay again, plateau and then around 01:45, we catch up.
The database is moving deep into replication delay sometimes. It does not do that on bare metal.</div>

    </div>
  </div>
  
  
  

  <div class='row justify-content-center mb-4 py-4 border-bottom mx-0'>
    <div class='col-lg-8'>

        <h1 style='font-weight: 700'><a href="https://blog.koehntopp.info/2022/09/02/mysql-yolo-mode.html" class='text-decoration-none text-dark'>MySQL: YOLO mode</a></h1>

        <div class='text-uppercase text-secondary' style='letter-spacing: 0.1rem;'>
          <img src='/assets/img/avatars/isotopp.jpg' class='me-1 p-0' style='width: 1.9rem; border-radius: 1rem;'>
          <a href="https://chaos.social/@isotopp" class='text-secondary text-decoration-none'>
            Kristian Köhntopp
          </a>
          -
          September 2, 2022
        </div>

        <div class='mt-3'>OH:
&ldquo;And now let&rsquo;s quickly push 2 billion rows into this database VM.&rdquo;
That is best done in YOLO mode. This is a mode of operation for a database that minimizes disk writes in favor of batched bulk writes.
It is not ACID, so if anything goes wrong during the load, the instance is lost. That is why it is called YOLO mode.
You are supposed to do this on a spare replica and not the production primary.</div>

    </div>
  </div>

  <div class='row mb-4 py-4 mx-0 justify-content-center'>
    <div class='col-lg-8 fs-5'>
    
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/" aria-label="Page 1" class="page-link" role="button">1</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 2" class="page-link" role="button">2</a>
      </li>
      <li class="page-item">
        <a href="/blog/3.html" aria-label="Page 3" class="page-link" role="button">3</a>
      </li>
      <li class="page-item">
        <a href="/blog/4.html" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/blog/5.html" aria-label="Page 5" class="page-link" role="button">5</a>
      </li>
      <li class="page-item">
        <a href="/blog/3.html" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/blog/51.html" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>
    </div>
  </div>


    
</div>



            <footer class='row justify-content-center mb-4 pb-4 mx-0'>
  <div class='col-8 text-center'>
    <div>
      A collection of old stuff, new stuff and random stuff. 
    </div>
    <div class='row text-primary mt-4'>
      <div class='col'>

        <a href='/feed.xml' title='Follow RSS feed' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#rss-fill'/></svg>
        </a>

        <a href='mailto:kristian.koehntopp@gmail.com' title='Email' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#envelope'/></svg>
        </a>

        <a href='https://github.com/isotopp' title='Follow on GitHub' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#github'/></svg>
        </a>

	<a rel="me" href="https://chaos.social/@isotopp" title='Follow on Mastodon' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#mastodon'/></svg>
	</a>

        <a href='https://www.reddit.com/user/isotopp' title='Follow on Reddit' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#reddit'/></svg>
        </a>

        <a href='http://steamcommunity.com/id/ixotopp' title='Follow on Steam' class='me-3 text-decoration-none'>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#steam'/></svg>
        </a>



        <a href='https://www.youtube.com/user/isotopp' title='Follow on YouTube' class=''>
          <svg class='bi' height='2.5rem' width='2.5rem' fill='currentColor'><use xlink:href='/bootstrap-icons.svg#youtube'/></svg>
        </a>

      </div>
    </div>
  </div>
</footer>


        </main>

	





<script src="https://blog.koehntopp.info/js/bootstrap.js"></script>




<script src="https://blog.koehntopp.info/js/lunr.js"></script>





<script src="https://blog.koehntopp.info/js/app.js"></script>


    </body>
</html>
